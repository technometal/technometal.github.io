(this["webpackJsonpproject-05"]=this["webpackJsonpproject-05"]||[]).push([[0],{229:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(51),c=n.n(l),o=n(4),s=(n(93),n(54)),u=n(10),i=n.n(u),m=n(16),p=n(17),d=n(1),f=function(e){return r.a.createElement("header",{className:"App-header"},r.a.createElement("ul",{className:"container"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},"My Site")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/new"},"New Post")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/login"},"Login Page"))))},E=function(e){var t=e.type;return r.a.createElement("div",{className:"App-message ".concat(t)},r.a.createElement("p",{className:"container"},r.a.createElement("strong",null,{saved:"Post has been saved!",updated:"Post has been updated!",deleted:"Post has been deleted."}[t])))},b=function(e){var t=e.posts;return r.a.createElement("article",{className:"posts container"},r.a.createElement("h1",null,"Posts"),r.a.createElement("ul",null,t.length<1&&r.a.createElement("li",{key:"empty"},"No posts yet!"),t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("h2",null,r.a.createElement(o.b,{to:"/post/".concat(e.slug)},e.title)),r.a.createElement("p",null,r.a.createElement(o.b,{to:"/edit/".concat(e.slug)},"Edit")))}))))},h=n(86),g=function(e){var t=e.post,n=new h.QuillDeltaToHtmlConverter(t.content.ops,{}).convert();return r.a.createElement("article",{className:"post container"},r.a.createElement("h1",null,t.title),r.a.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:n}}))},v=n(14),w=n(87),j=n.n(w),O=n(50).default,y=function(e){var t=e.post,n=e.addNewPost,l=e.updatePost,c=Object(a.useState)(Object(v.a)({},t)),o=Object(p.a)(c,2),s=o[0],u=o[1],f=Object(a.useState)(!1),E=Object(p.a)(f,2),b=E[0],h=E[1],g=Object(a.useRef)();Object(a.useEffect)((function(){g.current=s}),[s]);var w=g.current,y=r.a.useRef();Object(a.useEffect)((function(){w&&y.current&&t.id!==w.id&&(u(Object(v.a)({},t)),y.current.getEditor().setContents(""))}),[w,t]);var x=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!s.title){e.next=8;break}return l?l(s):n(s),h(!0),e.next=6,O.put("http://localhost:3001/posts",s);case 6:e.next=9;break;case 8:alert("Title required");case 9:console.log(s);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!0===b?r.a.createElement(d.a,{to:"/"}):r.a.createElement("form",{className:"container",onSubmit:x},r.a.createElement("h1",null,"Add a New Post"),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"form-title"},"Title:"),r.a.createElement("br",null),r.a.createElement("input",{defaultValue:s.title,id:"form-title",value:s.title,onChange:function(e){return u(Object(v.a)(Object(v.a)({},s),{},{title:e.target.value}))}})),r.a.createElement("p",null,r.a.createElement("label",{htmlFor:"form-content"},"Content:")),r.a.createElement(j.a,{ref:y,defaultValue:s.content,onChange:function(e,t,n,a){u(Object(v.a)(Object(v.a)({},s),{},{content:a.getContents()}))}}),r.a.createElement("p",null,r.a.createElement("button",{type:"submit"},"Save")))},x=function(){return r.a.createElement("article",{className:"not-found container"},r.a.createElement("h1",null,"404!"),r.a.createElement("p",null,"Content not found. ",r.a.createElement(o.b,{to:"/"},"Return to posts")))},N=n(50).default,P=function(e){var t=function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={email:t.target.email.value,password:t.target.password.value},e.next=4,N.post("http://localhost:3001/users/login",n).then((function(e){return localStorage.setItem(e.headers.get("x-auth"))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{className:"form-signin",onSubmit:t},r.a.createElement("h1",{class:"h3 mb-3 fw-normal"},"Please sign in"),r.a.createElement("div",{class:"form-floating"},r.a.createElement("input",{type:"email",class:"form-control",name:"email",id:"floatingInput",placeholder:"name@example.com"}),r.a.createElement("label",{for:"floatingInput"},"Email address")),r.a.createElement("div",{class:"form-floating"},r.a.createElement("input",{type:"password",class:"form-control",name:"password",id:"floatingPassword",placeholder:"Password"}),r.a.createElement("label",{for:"floatingPassword"},"Password")),r.a.createElement("div",{class:"checkbox mb-3"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:"remember-me"})," Remember me")),r.a.createElement("button",{class:"w-100 btn btn-lg btn-primary",type:"submit"},"Sign in"),r.a.createElement("p",{class:"mt-5 mb-3 text-muted"},"\xa9 2017\u20132021")))},S=(n(229),n(50).default),k=function(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(null),u=Object(p.a)(o,2),h=u[0],v=u[1],w=function(e){v(e),setTimeout((function(){v(null)}),1600)},j=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("http://localhost:3001/posts");case 2:t=e.sent,console.log(t.data),c(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return j()}),[]);var O=function(e){return encodeURIComponent(e.toLowerCase().split(" ").join("-"))},N=function(e){e.id=l.length+1,e.slug=O(e.title),e.title.length<5?alert("post not accepted, keep trying"):(c([].concat(Object(s.a)(l),[e])),w("saved"))},k=function(e){e.slug=O(e.title);var t=l.findIndex((function(t){return t.id===e.id})),n=l.slice(0,t).concat(l.slice(t+1)),a=[].concat(Object(s.a)(n),[e]).sort((function(e,t){return e.id-t.id}));c(a),w("updated")};return r.a.createElement("div",{className:"App"},r.a.createElement(f,null),h&&r.a.createElement(E,{type:h}),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",render:function(){return r.a.createElement(b,{posts:l})}}),r.a.createElement(d.b,{path:"/post/:postSlug",render:function(e){var t=l.find((function(t){return t.slug===e.match.params.postSlug}));return t?r.a.createElement(g,{post:t}):r.a.createElement(d.a,{to:"/"})}}),r.a.createElement(d.b,{exact:!0,path:"/new",render:function(){return r.a.createElement(y,{addNewPost:N,post:{id:0,slug:"",title:"",content:""}})}}),r.a.createElement(d.b,{path:"/login",component:P}),r.a.createElement(d.b,{path:"/edit/:postSlug",render:function(e){var t=l.find((function(t){return t.slug===e.match.params.postSlug}));return t?r.a.createElement(y,{updatePost:k,post:t}):r.a.createElement(d.a,{to:"/"})}}),r.a.createElement(d.b,{component:x})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,n){e.exports=n(230)},93:function(e,t,n){}},[[88,1,2]]]);
//# sourceMappingURL=main.dca961cc.chunk.js.map